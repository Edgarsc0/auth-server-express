<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
	<style>
		rect[name=aula]:hover{
  fill: aqua;
}
path[name=aula]:hover{
    fill: aqua;
}
.main{
    display: grid;
    justify-content: center;
    /* border: 1px solid black; */
    height: 700px;
    width: 100%;
}
#title{
    height:80px;
  width: 100%;
}
#button{
    visibility: hidden;
  height: 100px;
}
.IniciarRutabutton{
    font-size: 20px;
    width: 100%;
    margin: 10px auto;
	justify-content: center;
	display: block;
	color: #fff;
	background: #573b8a;
	/* font-size: 1em; */
	font-weight: bold;
	/* margin-top: 20px; */
	outline: none;
	border: #fff solid 1px;
	border-radius: 5px;
	transition: .2s ease-in;
	cursor: pointer;
}
.inputDiv{
  width: 100%;
  display: inline-flex;
  justify-content: center;
  margin-bottom: 20px;
}
input{
    width: 85%;
    font-size: 20px;
}
.searchButton{
    width: 15%;
    height: 40px;
}
.resaltado{
    fill: aqua;
}
svg{
    /* border: 1px solid black; */
    height: 600px;
    width: 1000px;
}
.content{
    /* border: 1px solid black; */
    text-align: center;
    width: 100%;
}
.mainContent{
  display: grid;
  /* border: 1px solid black; */
  justify-content: center;
}
.bg {
    animation:slide 3s ease-in-out infinite alternate;
	background-image: linear-gradient(-60deg, #18365b 50%, #1c1f2c 50%);
	bottom:0;
	left:-50%;
	opacity:.9;
	position:fixed;
	right:-50%;
	top:0;
	z-index:-1;
}
.bg2 {
    animation-direction:alternate-reverse;
	animation-duration:4s;
}
.bg3 {
	animation-duration:5s;
}
@keyframes desopacar{
	from{
        opacity: 0;
	}to{
        opacity: 1;
	}
}
@keyframes opacar{
    from{
        opacity: 1;
	}to{
        opacity: 0;
	}
}
@keyframes slide {
    0% {
        transform:translateX(-25%);
	}
	100% {
        transform:translateX(25%);
	}
}
.button{
    width: 20%;
	/* height: 40px; */
	margin: 10px auto;
	justify-content: center;
	display: block;
	color: #fff;
	background: #573b8a;
	font-size: 1em;
	font-weight: bold;
	/* margin-top: 20px; */
	outline: none;
	border: #fff solid 1px;
	border-radius: 5px;
	transition: .2s ease-in;
	cursor: pointer;
}
.buscador {
    color: black;
    margin: 10px auto;
    width: 70%;
    height: 40px;
    border-radius: 5px;
    border: #573b8a solid;
}
*{
    color: #fff;
    text-align: center;
}
</style>
</head>
<body>
    <div class="animcaion">
        <div class="bg"></div>
        <div class="bg bg2"></div>
        <div class="bg bg3"></div>
    </div>
	<h1>Consultar Espacios Fisicos</h1>
    <h1><a href="https://next-client-gabow.vercel.app/Mapas">Volver a mapas</a></h1>
            <div class="inputDiv">
                <select class="button" id="select" onchange="cambiar()">
                    <option value="">Escoger piso</option>
                    <option value="pb">Planta Baja</option>
                    <option value="p1">Piso 1</option>
                    <option value="p2">Piso 2</option>
                    <option value="p3">Piso 3</option>
                </select>
                <input class="buscador" list="aulas" id="search" placeholder="Buscar...">
                <button class="searchButton button" onclick="redirigir()">Buscar</button>
                <datalist id="aulas"></datalist>
            </div>
	<div id="around" class = 'main'>
		<svg onmouseover="" id="eqXo87N13f91" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 1920 1080" shape-rendering="geometricPrecision" text-rendering="geometricPrecision" style="background-color:transparent">
			<g id = 'viewport'>
				<!--RECTANGULOS PRINCIPALES-->
				<rect width="1920" height="360" rx="0" ry="0" fill="#eae8e8" stroke="#000"></rect>
				<rect width="1920" height="360" rx="0" ry="0" transform="translate(0 720)" fill="#eae8e8" stroke="#000"></rect>
				<rect width="1920" height="360" rx="0" ry="0" transform="matrix(.604008 0 0 1 431.856931 359.999999)" fill="#eae8e8" stroke="#000"></rect>
				<!--RECTANGULOS SALONES-->
				<rect name="aula" id="Salon 7" width="213.3" height="180" rx="0" ry="0" fill="#a5a7aa" stroke="#000"></rect>
				<rect name="aula" id="Salon 6" width="213.3" height="180" rx="0" ry="0" transform="translate(213.3 0)" fill="#a5a7aa" stroke="#000"></rect>
				<rect name="aula" id="Salon 5" width="213.3" height="180" rx="0" ry="0" transform="translate(426.6 0)" fill="#a5a7aa" stroke="#000"></rect>
				<rect name="aula" id="Salon 4" width="213.3" height="180" rx="0" ry="0" transform="translate(639.9 0)" fill="#a5a7aa" stroke="#000"></rect>
				<rect name="aula" id="Salon 3" width="213.3" height="180" rx="0" ry="0" transform="translate(853.35 0)" fill="#a5a7aa" stroke="#000"></rect>
				<rect name="aula" id="Bodega" width="213.3" height="180" rx="0" ry="0" transform="matrix(.460864 0 0 1 1066.65 0)" fill="#a5a7aa" stroke="#000"></rect>
				<rect name="aula" id="Coordinacion" width="213.3" height="180" rx="0" ry="0" transform="matrix(.460864 0 0 1 533.24998 720)" fill="#a5a7aa" stroke="#000"></rect>
				<rect name="aula" id="Asesoria" width="213.3" height="180" rx="0" ry="0" transform="matrix(.460864 0 0 1 1591.602331 720)" fill="#a5a7aa" stroke="#000"></rect>
				<rect name="aula" id="Cubiculo" width="213.3" height="180" rx="0" ry="0" transform="matrix(.460864 0 0 1 1173.3 720)" fill="#a5a7aa" stroke="#000"></rect>
				<rect name="aula" id="Salon 2" width="213.3" height="180" rx="0" ry="0" transform="translate(1164.952291 0)" fill="#a5a7aa" stroke="#000"></rect>
				<rect name="aula" id="Salon 1" width="213.3" height="180" rx="0" ry="0" transform="translate(1378.252291 0)" fill="#a5a7aa" stroke="#000"></rect>
				<rect name="aula" id="Dibujo I" width="217.391736" height="181.990521" rx="0" ry="0" transform="matrix(1.511557 0 0 1.978125 1591.552291 0)" fill="#a5a7aa" stroke="#000"></rect>
				<rect name="aula" id="Salon Profesores" width="213.3" height="360" rx="0" ry="0" transform="translate(0 720)" fill="#a5a7aa" stroke="#000"></rect>
				<rect name="aula" id="Lab. Quimica I" width="180" height="360" rx="0" ry="0" transform="matrix(0 1-.888889 0 533.24998 720)" fill="#a5a7aa" stroke="#000"></rect>
				<rect name="aula" id="Lab. Fisica I y II" width="180" height="360" rx="0" ry="0" transform="matrix(0 1-.888889 0 1591.602331 720)" fill="#a5a7aa" stroke="#000"></rect>
				<rect name="aula" id="Lab. Quimica II" width="180" height="360" rx="0" ry="0" transform="matrix(0 1-1.142093 0 1042.705751 720)" fill="#a5a7aa" stroke="#000"></rect>
				<rect name="aula" id="Lab. Fisica III y IV" width="230.095378" height="360" rx="0" ry="0" transform="translate(1689.904622 720)" fill="#a5a7aa" stroke="#000"></rect>
				<rect name="aula" id="Baños Mujeres" width="273.4" height="360" rx="0" ry="0" transform="translate(431.856931 360)" fill="#d2dbed" stroke-width="0"></rect>
				<rect name="aula" id="Baños Hombres" width="273.4" height="360" rx="0" ry="0" transform="translate(1318.202331 359.999999)" fill="#d2dbed" stroke-width="0"></rect>
			</g>
		</svg>
		<path d="" fill="none" stroke="#3f5787" stroke-width="3.84"></path><path d="" fill="none" stroke="#3f5787" stroke-width="3.84"></path><path d="M426.6,719.999999L0,720l1042.705751-.000001" transform="translate(.000001 0.000002)" fill="none" stroke="#3f5787" stroke-width="3.84"></path><path d="M1920.152291,-0.000001v359.999999h-328.54996l-.05004,360l328.6.000001v360.000002l-1920.15229.000001v-360.000001l431.85693-.000002v-359.999997" transform="translate(0 0.000001)" fill="none" stroke="#000" stroke-width="3.84"></path><path d="M853.2,360.000003l320.1-.000001v239.999999" transform="translate(0 0.000001)" fill="none" stroke="#eae8e8" stroke-width="3.84"></path><path d="M705.256931,539.999999h147.943069v180.000003" transform="translate(0 0.000001)" fill="none" stroke="#3f5787" stroke-width="3.84"></path><path d="" fill="none" stroke="#3f5787" stroke-width="3.84"></path><path d="M705.256931,359.999999v360" fill="none" stroke="#3f5787" stroke-width="3.84"></path><path d="M705.256931,359.999999v360" transform="translate(14.847104 0)" fill="none" stroke="#3f5787" stroke-width="3.84"></path><path d="M705.256931,359.999999v360" transform="translate(35.08538 0)" fill="none" stroke="#3f5787" stroke-width="3.84"></path><path d="M705.256931,359.999999v360" transform="translate(54.556201 0)" fill="none" stroke="#3f5787" stroke-width="3.84"></path><path d="M705.256931,359.999999v360" transform="translate(73.971535 0)" fill="none" stroke="#3f5787" stroke-width="3.84"></path><path d="M705.256931,359.999999v360" transform="translate(94.773946 0)" fill="none" stroke="#3f5787" stroke-width="3.84"></path><path d="M705.256931,359.999999v360" transform="translate(115.087929 0)" fill="none" stroke="#3f5787" stroke-width="3.84"></path><path d="M705.256931,359.999999v360" transform="translate(131.87208 0)" fill="none" stroke="#3f5787" stroke-width="3.84"></path><path d="M705.256931,359.999999v360" transform="translate(147.943069 0)" fill="none" stroke="#3f5787" stroke-width="3.84"></path><path d="M705.256931,359.999999v360" transform="translate(612.9454 0.000004)" fill="none" stroke="#3f5787" stroke-width="3.84"></path><path d="M705.256931,359.999999v360" transform="translate(595.164178 0.000004)" fill="none" stroke="#3f5787" stroke-width="3.84"></path><path d="M705.256931,359.999999v360" transform="translate(574.713872 0.000004)" fill="none" stroke="#3f5787" stroke-width="3.84"></path><path d="M705.256931,359.999999v360" transform="translate(555.014946 0.000004)" fill="none" stroke="#3f5787" stroke-width="3.84"></path><path d="M1318.202331,540.000003l-57.930454-.000004" fill="none" stroke="#3f5787" stroke-width="3.84"></path>
        <path d="M1173.3,360.000004L1173.3,720" fill="none" stroke="#3f5787" stroke-width="3.84"></path><path d="M1173.3,570v150.000003" transform="translate(0 0.000001)" fill="none" stroke="#eae8e8" stroke-width="3.84"></path><path d="M0.000002,0.000001L0,359.999999L431.856932,360h-431.85693L0.000001,0.000001" transform="translate(0 0.000001)" fill="none" stroke="#3f5787" stroke-width="3.84"></path>
        <button class="button" onclick = "zoom(event)">+</button>
        <button class="button" onclick = "zoomInverso(event)">-</button>
    </div>
	<div class="mainContent">
        <div class="content">
            <div id="title"></div>
            <div id="button"><button class="IniciarRutabutton" onclick="window.location.href='index.html'">Iniciar Ruta</button></div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
	<script>
        const cambiar=()=>{
            const value=document.getElementById("select").value;
            console.log(value);
            switch(value){
                case "pb":
                    window.location.href="/plantaBaja.html"
                    break;
                case "p1":
                    window.location.href="/piso1.html"
                    break;
                case "p2":
                    window.location.href="/piso2.html"
                    break;
                case "p3":
                    window.location.href="/piso3.html"
                    break;
                case "":break;
            }
        }
		// DRAG Y ZOOM EN LOS MAPAS
var svgCanvas = document.getElementById("eqXo87N13f91");
var viewPort = document.getElementById("viewport");

console.log(svgCanvas)
console.log(viewPort)

var drag = false;
var offset = { x: 0, y: 0 };
var factor = .1;
var matrix = new DOMMatrix();

// MIENTRASS ESTE EL MOUSE CLICKEANDO
svgCanvas.addEventListener('pointerdown', function (event) {

    drag = true;
    offset = { x: event.offsetX, y: event.offsetY };

});

// MIENTRAS SE MUEVA EL MOUSE
svgCanvas.addEventListener('pointermove', function (event) {
    if (drag) {
        var tx = event.offsetX - offset.x;
        var ty = event.offsetY - offset.y;
            offset = {
                x: event.offsetX,
                y: event.offsetY
            };
            
            matrix.preMultiplySelf(new DOMMatrix()
            .translateSelf(tx, ty));
            // SOLO SI ESTA DENTRO DE LOS LIMITES
            if((matrix.e > -1100 && matrix.e < 1100) && (matrix.f > -700 && matrix.f < 700)){

                viewPort.style.transform = matrix.toString();

            }
            else{

                if(matrix.e < 0){

                    matrix.e += 1;

                }
                else if(matrix.e > 0){

                    matrix.e -= 1;

                }
                else if(matrix.f < 0){

                    matrix.f += 1;

                }
                else if(matrix.f > 0){

                    matrix.f -= 1;

                }

            }

    }
});

// CUANDO EL MOUSE ABANDONE EL SVG
svgCanvas.addEventListener('pointerup', function (event) {
    drag = false;
});

// FUNCION DE ZOOM
function zoom (event) {
    var zoom = event.deltaY > 0 ? -1 : 1;
    var scale = 1 + factor * zoom;
    offset = {
        x: event.offsetX,
        y: event.offsetY
    };
    matrix.preMultiplySelf(new DOMMatrix()
        .translateSelf(offset.x, offset.y)
        .scaleSelf(scale, scale)
        .translateSelf(-offset.x, -offset.y));
        if(matrix.d > 1.7){
        
            matrix.d = 1.6;
    
        }
        else{
    
            viewPort.style.transform = matrix.toString();
    
        }
}

// FUNCION REZOOM
function zoomInverso (event) {
    var zoom = event.deltaY > 0 ? -1 : 1;
    var scale = 1 - factor / zoom;
    offset = {
        x: event.offsetX,
        y: event.offsetY
    };
    matrix.preMultiplySelf(new DOMMatrix()
        .translateSelf(offset.x, offset.y)
        .scaleSelf(scale, scale)
        .translateSelf(-offset.x, -offset.y));
    if(matrix.d < .6){
        
        matrix.d = .5;

    }
    else{

        viewPort.style.transform = matrix.toString();

    }
}

// EXISTE EN EL MAPA?
const validarBusqueda=(busqueda)=>{
    const options=document.getElementById("aulas").options;
    for(i of options){
        if(i.value==busqueda){
            return true;
        }
    }
    return false;
}

// MOSTRAR EN AZUL
const redirigir=()=>{
    const busqueda=document.getElementById("search").value;
    if(!validarBusqueda(busqueda)){
        Swal.fire({
            title:'Error',
            text: 'Has introducido una busqueda invalida. Revisa la entrada'
        });
    }else{
        window.location.assign(`piso3.html?location=${busqueda}`);
    }
}

// ESCRIBIR NOMBRE DEL LUGAR
const mostrar=(id)=>{
    document.querySelector("#title").innerHTML=`<h2>${id}</h2>`;
    document.getElementById("button").style.visibility="visible"
}

const removerResaltado=()=>{
    try{
        document.getElementsByClassName("resaltado")[0].removeAttribute("class");
    }catch(error){}
}
window.onload=()=>{
    let opt="";
    const datalist=document.getElementById("aulas");
    document.getElementsByName("aula").forEach((element)=>{
        element.setAttribute("onclick","mostrar(id)");
        opt+=`<option value="${element.id}">`;
    });
    datalist.innerHTML=opt;
    const valores = window.location.search;
    if(!valores==""){
        const enlace=document.createElement("A");
        enlace.setAttribute("href","piso3.html");
        enlace.innerHTML="Regresar a Principal";
        document.body.appendChild(enlace)
        const urlParams = new URLSearchParams(valores);
        const location = urlParams.get('location');
        const element=document.getElementById(location);
        element.setAttribute("class","resaltado");
        element.onclick();
        document.getElementsByName("aula").forEach((element)=>{
            element.setAttribute("onclick","removerResaltado(),mostrar(id)");
        });
    }
}
	</script>
</body>
</html>